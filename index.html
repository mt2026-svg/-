<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>鈴蘭台 爆走タイマー</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bangers&family=Noto+Sans+JP:wght@900&display=swap');

        :root {
            --comic-yellow: #ffee00;
            --comic-red: #ff3300;
            --comic-blue: #0088ff;
            --border-width: 4px;
        }

        /* 1分を切った時に body に付与するクラス */
        body.last-minute {
            filter: grayscale(100%); /* 全体をグレーにする */
            transition: filter 0.5s ease-in-out;
        }

        body {
            margin: 0;
            background: radial-gradient(circle, #333 10%, transparent 10%), #555;
            background-size: 20px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Noto Sans JP', sans-serif;
            overflow: hidden;
            transition: filter 0.5s ease-in-out;
        }

        .app-container {
            width: 90%;
            max-width: 420px;
            transform: rotate(-2deg);
        }

        .comic-panel {
            background: var(--comic-yellow);
            border: var(--border-width) solid #000;
            padding: 20px;
            box-shadow: 15px 15px 0px #000;
            position: relative;
        }

        .station-box {
            background: #000;
            color: #fff;
            padding: 5px 15px;
            display: inline-block;
            font-size: 1.2rem;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .destination-tag {
            background: var(--comic-blue);
            color: white;
            padding: 2px 10px;
            border: 2px solid #000;
            font-size: 0.9rem;
            display: block;
            width: fit-content;
            margin-bottom: 20px;
        }

        .label-main {
            font-family: 'Bangers', cursive;
            font-size: 2.5rem;
            color: #000;
            margin: 0;
            line-height: 1;
        }

        #timer {
            font-family: 'Bangers', cursive;
            font-size: 5.5rem;
            color: var(--comic-red);
            text-shadow: 4px 4px 0px #000;
            margin: 10px 0;
            transition: all 0.2s ease-in-out;
            display: block;
            white-space: nowrap;
        }

        /* 5分を切った時の巨大化と震え */
        #timer.hurry {
            font-size: 8.5rem;
            transform: scale(1.1) rotate(2deg);
            animation: shake 0.1s infinite;
        }

        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(2deg); }
            50% { transform: translate(-1px, -1px) rotate(2deg); }
            100% { transform: translate(1px, -1px) rotate(2deg); }
        }

        #next-train-info {
            background: #fff;
            border: 3px solid #000;
            font-weight: 900;
            padding: 5px;
            margin-top: 20px;
            transform: skew(-10deg);
        }

        .btn-group {
            margin-top: 25px;
            display: flex;
            gap: 10px;
        }

        button {
            flex: 1;
            font-family: 'Bangers', cursive;
            font-size: 1.5rem;
            padding: 10px;
            border: 3px solid #000;
            cursor: pointer;
            box-shadow: 4px 4px 0px #000;
        }

        button.active { background: var(--comic-red); color: white; }
        button.inactive { background: #fff; color: #000; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="comic-panel">
        <div class="station-box">鈴蘭台</div>
        <div class="destination-tag">新開地方面</div>
        
        <p class="label-main">NEXT TRAIN IN...</p>
        
        <div id="timer">00:00:00</div>
        
        <div id="next-train-info">DEPARTURE: --:--</div>

        <div class="btn-group">
            <button id="btn-weekday" class="active" onclick="setMode('weekday')">WEEKDAY</button>
            <button id="btn-holiday" class="inactive" onclick="setMode('holiday')">HOLIDAY</button>
        </div>
    </div>
</div>

<script>
    const schedules = {
        weekday: ["04:55", "05:13", "05:27", "05:40", "05:51", "06:01", "06:10", "06:18", "06:26", "06:33", "06:40", "06:47", "06:54", "07:01", "07:07", "07:13", "07:19", "07:25", "07:31", "07:37", "07:43", "07:49", "07:55", "08:01", "08:08", "08:15", "08:22", "08:30", "08:38", "08:46", "08:54", "09:02", "09:10", "09:18", "09:28", "09:38", "09:48", "09:58", "10:08", "10:23", "10:38", "10:53", "11:08", "11:23", "11:38", "11:53", "12:08", "12:23", "12:38", "12:53", "13:08", "13:23", "13:38", "13:53", "14:08", "14:23", "14:38", "14:53", "15:08", "15:23", "15:38", "15:53", "16:08", "16:21", "16:33", "16:45", "16:57", "17:09", "17:21", "17:33", "17:45", "17:57", "18:09", "18:21", "18:33", "18:45", "18:57", "19:09", "19:21", "19:33", "19:45", "19:57", "20:10", "20:25", "20:40", "20:55", "21:10", "21:25", "21:40", "21:55", "22:10", "22:25", "22:45", "23:05", "23:25", "23:45", "00:05"],
        holiday: ["04:55", "05:13", "05:27", "05:40", "05:54", "06:07", "06:20", "06:33", "06:45", "06:57", "07:09", "07:21", "07:33", "07:45", "07:57", "08:09", "08:21", "08:33", "08:45", "08:57", "09:09", "09:23", "09:38", "09:53", "10:08", "10:23", "10:38", "10:53", "11:08", "11:23", "11:38", "11:53", "12:08", "12:23", "12:38", "12:53", "13:08", "13:23", "13:38", "13:53", "14:08", "14:23", "14:38", "14:53", "15:08", "15:23", "15:38", "15:53", "16:08", "16:23", "16:38", "16:53", "17:08", "17:23", "17:38", "17:53", "18:08", "18:23", "18:38", "18:53", "19:08", "19:23", "19:40", "19:55", "20:10", "20:25", "20:40", "20:55", "21:10", "21:25", "21:40", "21:55", "22:15", "22:35", "22:55", "23:15", "23:35", "23:55"]
    };

    let currentMode = (new Date().getDay() === 0 || new Date().getDay() === 6) ? 'holiday' : 'weekday';

    function setMode(mode) {
        currentMode = mode;
        document.getElementById('btn-weekday').className = (mode === 'weekday') ? 'active'
